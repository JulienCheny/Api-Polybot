<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>DataTable</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.js"></script>
    <link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css"
      rel="stylesheet">
    <script
      src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css"
      href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css">
    <script
      src="https://cdn.bootcss.com/datatables/1.10.16/js/jquery.dataTables.js"></script>
    <style>
    .content {
      margin: 50px auto;
      border: 1px solid #ccc;
    }
    .operation {
      margin: 10px;
    }
    .operation>button {
      margin: 10px;
    }
    #books_length {
      float: left;
      margin-left: 20px;
    }
    #books_filter {
      float: right;
      margin-right: 20px;
    }
    #books {
      margin: 5px;
    }
    .center-block {
      display: block;
      width: 21%;
      margin: auto;
    }
  </style>
  </head>

  <body>
      <table id="polybot" class="table table-striped table-bordered row-border
        hover order-column" cellspacing="0" width="100%">
        <thead>
          <tr>
            <th>Id</th>
            <th>Question</th>
            <th>Format de la réponse</th>
            <th>Reponse</th>
            <th>Departement</th>
            <th>Annee</th>
            <th>&nbsp;&nbsp;Operation&nbsp;&nbsp;</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>

<script>

  $(function () {
    var table = $('#polybot').DataTable({
     "ajax":{ // 获取数据
            type:"GET",
            url:"http://51.38.45.203:8080/answers",
            "dataSrc":"",
            'dataFilter' : function (data) {
                var json = JSON.parse(data);
                json.recordTotal = json['hydra:totalItems'];
                json.recordsFiltered = json['hydra:totalItems'];
                json.data = json['hydra:member'];
                console.log(json);
                data0 = json;
                return JSON.stringify(json);   
            }     
                        
        },
              columns: [
            {"title": "Id", 'data':"id"},
            {"title": "Question",'data':"request.name"},
            {"title": "Format de la réponse",'data':"request.textResponse"},
            {"title": "Reponse",'data':"text"},
            {"title": "Departement",'data':'department.name'},
            {"title": "Annee",'data':'year.name'},
            {"title": "Operation",'data':null,'class':"align-center","defaultContent": "<button class='edit-btn' type='button'>编辑</button>"}
        ]
    });
    table.on('order.dt search.dt', function() {
      table.column(0, {
        search: 'applied',
        order: 'applied'
      }).nodes().each(function(cell, i) {
        cell.innerHTML = i + 1;
      });
    }).draw();
  })
</script>

    </html>